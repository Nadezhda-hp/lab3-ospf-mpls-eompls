# Лабораторная работа №3

## Эмуляция распределённой корпоративной сети связи, настройка OSPF и MPLS, организация первого EoMPLS

> Университет ИТМО | Факультет инфокоммуникационных технологий | Введение в маршрутизацию

---

### Описание

Компания "RogaIKopita Games" приобрела студию "Old Games" из Нью-Йорка. На сервере SGI Prism хранятся ценные исходники. Задача — подключить Нью-Йоркский офис к общей IP/MPLS сети и организовать EoMPLS-туннель между SGI Prism (Нью-Йорк) и компьютером инженеров в Санкт-Петербурге.

### Схема сети

```
                R01.LND ─────── R01.HKI
               /                       \
SGI Prism ── R01.NY                 R01.SPB ── PC1
               \                       /
                R01.LBN ─────── R01.MSK

           ╔═════════════════════════════╗
           ║  EoMPLS-туннель             ║
           ║  R01.NY  <════════> R01.SPB ║
           ╚═════════════════════════════╝
```

### Технологии

| Технология | Назначение |
|------------|-----------|
| OSPF | Динамическая маршрутизация, автоматическое построение путей |
| MPLS | Быстрая коммутация пакетов по меткам |
| LDP | Автоматическое распределение MPLS-меток |
| EoMPLS | L2-туннель через MPLS-сеть (Ethernet over MPLS) |
| ContainerLab | Эмуляция сетевой топологии |
| MikroTik RouterOS (CHR) | Операционная система роутеров |

### IP-адресация

| Роутер | Loopback | Город |
|--------|----------|-------|
| R01.NY | 10.10.10.1/32 | Нью-Йорк |
| R01.LND | 10.10.10.2/32 | Лондон |
| R01.LBN | 10.10.10.3/32 | Любляна |
| R01.HKI | 10.10.10.4/32 | Хельсинки |
| R01.MSK | 10.10.10.5/32 | Москва |
| R01.SPB | 10.10.10.6/32 | Санкт-Петербург |

EoMPLS-сегмент: SGI Prism (10.10.20.1) и PC1 (10.10.20.2) в одной L2-подсети.

### Структура репозитория

```
├── lab3.yaml              # Топология ContainerLab
├── R01_NY.rsc             # Конфигурация роутера Нью-Йорк
├── R01_LND.rsc            # Конфигурация роутера Лондон
├── R01_LBN.rsc            # Конфигурация роутера Любляна
├── R01_HKI.rsc            # Конфигурация роутера Хельсинки
├── R01_MSK.rsc            # Конфигурация роутера Москва
├── R01_SPB.rsc            # Конфигурация роутера Санкт-Петербург
├── lab3_report.md         # Отчёт с результатами
├── lab3_network_diagram.png   # Схема сети
└── lab3_ping_routes.png       # Результаты проверки связности
```

### Запуск

```bash
cd lab3
sudo containerlab deploy --topo lab3.yaml
```

### Результат

- Все OSPF-соседства в состоянии **Full**
- LDP-сессии в состоянии **Operational**
- EoMPLS-туннель работает: пинг SGI Prism → PC1 проходит с TTL=64 (L2-связность), 0% потерь
